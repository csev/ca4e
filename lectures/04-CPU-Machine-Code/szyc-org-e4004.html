<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>e4004</title>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<script language="JavaScript" type="text/javascript" src="./varia/4004cpu.js"></script>
		<script language="JavaScript" type="text/javascript" src="./varia/4004gui.js"></script>
		<link rel="stylesheet" href="./varia/4004_style.css" type="text/css">
	</head>
	<body>
		<div id="main">
			<h2>INTEL 4004 SYSTEM EMULATOR (initial version)</h2>
			<div id="left">
			<h3>4002 RAM:
					<select id="select1-1">
						<option value="0" selected="selected">BANK #0</option>
						<option value="1">BANK #1</option>
						<option value="2">BANK #2</option>
						<option value="3">BANK #3</option>
					</select>
					<select id="select1-2">
						<option value="0" selected="selected">CHIP #0</option>
						<option value="1">CHIP #1</option>
						<option value="2">CHIP #2</option>
						<option value="3">CHIP #3</option>
					</select>
				 </h3>
				<div id="ram_0" class="box ram">
					<table id="memory_0" class="memory">
						<tr><th style="width: 100px;"></th><th colspan="17">MAIN MEMORY</th></tr>
						<tr><th></th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th></tr>
						<tr><th class="left">REGISTER 0</th><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
						<tr><th class="left">REGISTER 1</th><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
						<tr><th class="left">REGISTER 2</th><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
						<tr><th class="left">REGISTER 3</th><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>				
					</table>
					
					<table id="status_0" class="status">
						<tr><th colspan="4">STATUS</th></tr>
						<tr><th>0</th><th>1</th><th>2</th><th>3</th></tr>
						<tr><td>0</td><td>0</td><td>0</td><td>0</td></tr>		
						<tr><td>0</td><td>0</td><td>0</td><td>0</td></tr>		
						<tr><td>0</td><td>0</td><td>0</td><td>0</td></tr>		
						<tr><td>0</td><td>0</td><td>0</td><td>0</td></tr>				
					</table>
					
					<br style="clear: both;">
					<h3>OUTPUTS:</h3>
					<table id="outputs_0" class="outputs">
						<tr><th class="left">Q0</th><th class="left">Q1</th><th class="left">Q2</th><th class="left">Q3</th></tr>
						<tr><td><input type="radio" disabled="disabled"></td><td><input type="radio" disabled="disabled"></td><td><input type="radio" disabled="disabled"></td><td><input type="radio" disabled="disabled"></td></tr>
					</table>
					<input type="button" value="RESET" name="reset" class="reset">
				</div>
				
				<h3>4002 RAM:
					<select id="select2-1">
						<option value="0" selected="selected">BANK #0</option>
						<option value="1">BANK #1</option>
						<option value="2">BANK #2</option>
						<option value="3">BANK #3</option>
					</select>
					<select id="select2-2">
						<option value="0">CHIP #0</option>
						<option value="1" selected="selected">CHIP #1</option>
						<option value="2">CHIP #2</option>
						<option value="3">CHIP #3</option>
					</select>
				 </h3>
				<div id="ram_1" class="box ram">
					<table id="memory_1" class="memory">
						<tr><th style="width: 100px;"></th><th colspan="17">MAIN MEMORY</th></tr>
						<tr><th></th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th></tr>
						<tr><th class="left">REGISTER 0</th><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
						<tr><th class="left">REGISTER 1</th><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
						<tr><th class="left">REGISTER 2</th><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
						<tr><th class="left">REGISTER 3</th><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
					</table>
					
					<table id="status_1" class="status">
						<tr><th colspan="4">STATUS</th></tr>
						<tr><th>0</th><th>1</th><th>2</th><th>3</th></tr>
						<tr><td>0</td><td>0</td><td>0</td><td>0</td></tr>		
						<tr><td>0</td><td>0</td><td>0</td><td>0</td></tr>		
						<tr><td>0</td><td>0</td><td>0</td><td>0</td></tr>		
						<tr><td>0</td><td>0</td><td>0</td><td>0</td></tr>				
					</table>
					
					<br style="clear: both;">
					<h3>OUTPUTS:</h3>
					<table id="outputs_1" class="outputs">
						<tr><th class="left">Q0</th><th class="left">Q1</th><th class="left">Q2</th><th class="left">Q3</th></tr>
						<tr><td><input type="radio" disabled="disabled"></td><td><input type="radio" disabled="disabled"></td><td><input type="radio" disabled="disabled"></td><td><input type="radio" disabled="disabled"></td></tr>
					</table>
					<input type="button" value="RESET" name="reset" class="reset">
				</div>
				
				<h3>4001 ROM:</h3>
				<div id="io" class="box">
					<b>I/O PORT:</b>
					<table id="port" class="port">
						<tr><th class="left">Q0</th><th class="left">Q1</th><th class="left">Q2</th><th class="left">Q3</th></tr>
						<tr><td><input type="radio" disabled="disabled"></td><td><input type="radio" disabled="disabled"></td><td><input type="radio" disabled="disabled"></td><td><input type="radio" disabled="disabled"></td></tr>
					</table>
				</div>			
			</div>
			
			<div id="right">
				<h3>4004 CPU:</h3>
				<div id="cpu" class="box">
					<div class="leftDiv">
						<table id="pc">
							<tr><th style="width: 80px;"></th><td colspan="3"><span>STACK</span></td></tr>
							<tr><th class="left">PC</th><td>0</td><td>0</td><td>0</td></tr>
							<tr><th class="left">LEVEL 1</th><td>0</td><td>0</td><td>0</td></tr>
							<tr><th class="left">LEVEL 2</th><td>0</td><td>0</td><td>0</td></tr>
							<tr><th class="left">LEVEL 3</th><td>0</td><td>0</td><td>0</td></tr>
						</table>
					
						<table id="registers">
							<tr><td colspan="8"><span>REGISTERS</span></td></tr>
							<tr><th>R0</th><th>R1</th><td>0</td><td>0</td>   <th>R8</th><th>R9</th><td>0</td><td>0</td></tr>
							<tr><th>R2</th><th>R3</th><td>0</td><td>0</td>   <th>RA</th><th>RB</th><td>0</td><td>0</td></tr>
							<tr><th>R4</th><th>R5</th><td>0</td><td>0</td>   <th>RC</th><th>RD</th><td>0</td><td>0</td></tr>
							<tr><th>R6</th><th>R7</th><td>0</td><td>0</td>   <th>RE</th><th>RF</th><td>0</td><td>0</td></tr>
						</table>

						<div>
							<span id="accu"><b>ACCUMULATOR:</b> <span>0 [0000]</span></span>
							<span id="carry"><b>CARRY:</b> <input type="checkbox" disabled="disabled"></span>
							<span id="test"><b>TEST:</b> <input type="checkbox" disabled="disabled"></span>
							<br><br>
							<span id="dassem"> <span>046 7B 45</span> <span>ISZ R11,$45</span> </span>
							<span id="cycles"><b>CYCLES:</b> 0</span>
						</div>
					</div>
					<div class="rightDiv">
						<input type="button" value="STEP" id="step"><br>
						<input type="button" value="ANIMATE" id="animate"><br>
						<input type="button" value="RUN" id="run"><br>
						<input type="button" value="STOP" id="stop"><br>
						<input type="button" value="RESET" id="resetCPU">
					</div>
				</div>
			
				<h3>CONFIGURATION:</h3>
				<div id="conf" class="box">
					<div class="leftDiv">
						<input type="radio" id="hardware_0" name="hardware" checked="true"> General<br>
						<input type="radio" id="hardware_1" name="hardware" onchange="testFlag = this.checked;"> Intel 4001-0009 hardware (<a href="./varia/MCS-4_Evaluation_Kit_4001_0009.pdf">link</a>)<br>
						<input type="radio" id="hardware_2" name="hardware" onchange="mcsFlag = this.checked;"> MCS-4/40 hardware (<a href="https://oldics.com/works/mc404/">link</a>)
					</div>

					<div class="rightDiv">
						<input type="button" value="BreakPoints" id="bp"><br>
						<input type="button" value="RESET All" id="ra">
					</div>
				</div>
					
				<h3>ROM block:</h3>
				<div id="rom" class="box">
					<div class="leftDiv">
						<textarea id="data"></textarea><br>
						<div style="margin-top: 10px;">
							<input type="checkbox" id="dasm"> <b>Assembling code</b>
							<input type="checkbox" id="ascii"> <b>ASCII</b>
						</div>
					</div>
					
					<div class="rightDiv">
						<input type="button" value="LOAD" id="load"><br>
						<input type="button" value="RESET" id="resetROM"><br><br><br>
						<input type="button" value="P1" id="p1"><br>
						<input type="button" value="P2" id="p2"><br>
						<input type="button" value="P3" id="p3">
					</div>
				</div>			
			</div>
			<br style="clear: both;">
		</div>
		<div id="description">
			<div class="title">What is the e4004 emulator?</div>
			<p>The e4004 emulator is a very complex emulator of the INTEL 4004 system. All register and flags
			of CPU block are emulated. Also all registers of sytem RAM and ROM are emulated.
			The full code of this software is completely written in JavaScript, so it should be able
			to execute on whatever platform with the internet browser and implemented CSS2 and JavaScript
			interpreter.</p>

			<div class="title">Features Of The as4004 Assembler</div>
			<ul>
				<li>Intuitive 6 pannels user interface.</li>
				<li>Minimum system requirements are internet browser with JavaScript interpreter and CSS2.</li>
				<li>Object code can be used from <a href="../asm.html">as4004 assembler</a>.</li>
				<li>Various configuration of the hardware</li>
				<li>Single 'step', 'animate' and 'run' mode are available</li>
				<li>Possibility of disassembling code</li>
				<li>Breakpoints system is available</li>
				<li>Possibility of changing data of all registers and flags.</li>
				<li>The emulator is completely free.</li>
			</ul>

			<div class="title">Running the e4004 emulator</div>
			<ul>
				<li>Enter your objects code into the "ROM block" pannel.</li>
				<li>Click the "LOAD" button.</li>
				<li>In "ROM block" can be see dump of ROM memory.</li>
				<li>It can be display the disassembling code too.</li>
				<li>Click the "ANIMATE" button in "4004 CPU" pannel.</li>
				<li>Program will be running step by step.</li>
			</ul>

			<div class="title">Quick Start</div>
			<p>This part of the description is for those of you who want to see the e4004 emulator in demo action.
			It can be easy to realize. Just press one of described bellow buttons and next press the 'ANIMATE'
			button.</p><br><br>
			<h3>
				<b>'P1' button</b> - RAM memory test program
			</h3>
			<br><br>
			<div class="frame">
<div class="code">
; ram_test.asm
; test the Intel 4002
init
	FIM R0R1, 0    ; initialize R0=R1=0
	FIM R2R3, 0    ; initialize R2=R3=0
	LDM 12         ; load 12 to accumulator
	XCH R2         ; initialize R2=12
loop1
	SRC R0R1       ; select register & address
	WRM            ; write accumulator to memory
	IAC            ; increment accumulator
	ISZ R1, loop1  ; loop 16 times
	INC R0         ; increment R0
	ISZ R2, loop1  ; loop 4 times

	FIM R0R1, 0    ; initialize R0=R1=0
	FIM R2R3, 0    ; initialize R2=R3=0
	LDM 12         ; load 12 to accumulator
	XCH R2         ; initialize R2=12
loop2
	SRC R0R1       ; select register & address
	WR0            ; write status character 0
	IAC            ; increment accumulator
	WR1            ; write status character 1
	IAC            ; increment accumulator
	WR2            ; write status character 2
	IAC            ; increment accumulator
	WR3            ; write status character 3
	IAC            ; increment accumulator
	INC R0         ; increment R0
	ISZ R2, loop2  ; loop 4 times

DONE
	JUN DONE       ; endless loop as end of program

</div>
			</div>
			<br><br>
			<h3>
				<b>'P2' button</b> - MCS-4 EVALUATION KIT USING THE <a href="./varia/MCS-4_Evaluation_Kit_4001_0009.pdf">4001-0009</a>
			</h3>
			<br>
			<p>This kit provides both a convenient way of evaluating the MCS-4 parts
			and ab educational vehicle to better understand the MCS-4 operation.
			The <a href="./varia/MCS-4_Evaluation_Kit_4001_0009.pdf">4001-0009</a>
			a microprogram that exercises the 4004 and 4002's and executes all of
			the 45 instructions in <a href="../iset.html">MCS-4 instruction set.</a></p>

			<br><br><br>
			<b>'P3' button</b> - not implement yet
			<br><br>
		</div>
		<div id="break"></div>
	</body>
</html>
